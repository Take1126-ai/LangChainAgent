# LangChain CLI Agent
(このREADMEはAIによって生成されています)<br>
LangChainフレームワークを活用し、ファイル操作、コマンド実行、インターネット検索が可能な対話型AI CLIツール。<br>
`think_tool`を用いた思考と自己批判によりハルシネーション対策を行いつつユーザーの要求に応じた作業・調査等を行う。

## 機能

*   **対話型CLIインターフェース**: `Typer` を使用したコマンドラインインターフェースで、AIアシスタントと対話できます。
*   **エージェントの思考と作業管理**:
    *   **`think_tool`**: エージェントの戦略的思考、作業過程の記録、および最終回答の自己評価のために使用されます。これにより、AIは自身の思考プロセスを振り返り、回答の品質を向上させることができます。
    *   **`work_tool`**: エージェントの作業状態（計画、課題、TODOリストなど）を管理するためのツールです。
    *   **`memos`**: 複数ステップのタスクにおける中間調査過程や必要な情報を「作業用メモリ」として記録するために使用されます。不要になった情報は自動的に削除されます。
*   **ファイル・ディレクトリ操作**: ローカルファイルシステムに対する以下の操作が可能です。
    *   `list_directory_contents`: ディレクトリ内容のリスト表示
    *   `read_file`: ファイル内容の読み込み
    *   `write_file`: ファイルへの書き込み
    *   `delete_file`: ファイルの削除
    *   `create_directory`: ディレクトリの作成
    *   `delete_directory`: ディレクトリの削除
    *   `move`: ファイル/ディレクトリの移動・名前変更
    *   `modify_file_content`: ファイル内容の置換
    *   `read_many_files`: 複数ファイル/ディレクトリ内容の読み込み（globパターン対応）
    *   `search_file_content`: ファイル内容の正規表現検索
*   **コマンド実行**: シェルコマンドを実行し、その結果を取得できます。ファイルシステムを変更する可能性のあるコマンドにはユーザーの確認が必要です。
*   **インターネット検索**: `Tavily` を利用してインターネット検索を行い、結果の要約やスニペットを取得できます。
*   **会話履歴管理**: 会話履歴を保持し、コンテキストを維持します。
*   **内部思考とツール実行状況の可視化**: エージェントの内部思考プロセスやツール実行の状況をリアルタイムでコンソールに出力できます。

## インストール

1.  リポジトリをクローンします。
    ```bash
    git clone https://github.com/your-repo/LangChainCLIAgent.git
    cd LangChainCLIAgent
    ```
2.  `uv` を使用して依存関係をインストールします。
    ```bash
    uv sync
    ```
3.  環境変数を設定します。`.envsample` を参考に `.env` ファイルを作成し、必要なAPIキーを設定してください。
    ```
    GOOGLE_API_KEY="YOUR_GOOGLE_API_KEY"
    TAVILY_API_KEY="YOUR_TAVILY_API_KEY"
    ```

## 使い方

### 対話モードの開始

```bash
uv run main.py chat
```

### 内部思考の表示

エージェントの内部思考プロセスやツール実行状況をリアルタイムで表示するには、`src/config.py` の `WRITE_INNER_THOUGHTS` を `True` に設定してください。

```python
# src/config.py
class Config:
    # ...
    WRITE_INNER_THOUGHTS: bool = True
    # ...
```

設定後、再度 `uv run main.py chat` を実行すると、エージェントの思考やツール実行の詳細が `INNER_THINK:` プレフィックス付きで表示されます。

## 開発

### テストの実行

```bash
uv run pytest
```

### コードフォーマットとリンティング

```bash
uv run black .
uv run ruff check .
```

## 今後の課題

*   エラーハンドリングの強化
*   エージェントのパフォーマンス最適化
*   より広範なテストカバレッジ
*   本番環境での安全なAPIキー管理方法の検討
*   会話要約モジュールの再検討